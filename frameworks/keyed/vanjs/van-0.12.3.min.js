let e,t,o,l=Object,r=l.getPrototypeOf,f=document,n=(e,t,o,l)=>(e??(setTimeout(o,l),new Set)).add(t),s={get val(){return this.t},set val(e){let o=this,l=o.t;if(e!==l){o.o===l?t=n(t,o,v):e===o.o&&t.delete(o),o.t=e;for(let t of o.l)t(e,l)}},onnew(e){this.l.push(e)}},d=r(s),a=e=>r(e??0)===s,i=e=>a(e)?e.t:e,u=e=>e.map(i),_=e=>e.nodeType?e:new Text(e),g=(t,...o)=>{for(let l of o.flat(1/0))i(l)!=e&&t.appendChild(r(l)===s?b(l,e=>e):_(l));return t},w={},m=t=>new Proxy((o,...n)=>{let[a,...i]=r(n[0]??0)===d?n:[{},...n],u=t?f.createElementNS(t,o):f.createElement(o);for(let[t,f]of l.entries(a)){let n=o=>o?l.getOwnPropertyDescriptor(o,t)??n(r(o)):e,a=o+","+t,i=w[a]??(w[a]=n(r(u))?.set??0)?e=>u[t]=e:e=>u.setAttribute(t,e);r(f)===s?b(f,e=>(i(e),u)):r(f)===d?b(...f.deps,(...e)=>(i(f.f(...e)),u)):i(f)}return g(u,...i)},{get:(t,o)=>t.bind(e,o)}),p=e=>e.i=e.i.filter(e=>e.u?.isConnected),v=()=>{let o=[...t];t=e;for(let t of new Set(o.flatMap(p))){let{_:o,u:r}=t,f=t.g(...u(o),r,...(l=o,l.map(e=>a(e)?e.o:e)));f!==r&&(f!=e?r.replaceWith(t.u=_(f)):(r.remove(),t.u=e))}var l;for(let e of o)e.o=e.t},b=(...t)=>{let l=t.pop(),r=l(...u(t));if(r!=e){let f={_:t,u:_(r),g:l};for(let l of t)a(l)&&(o=n(o,l,()=>(o.forEach(p),o=e),1e3),l.i.push(f));return f.u}};export default{add:g,tags:m(),tagsNS:m,state:e=>({__proto__:s,t:e,o:e,i:[],l:[]}),bind:b};